<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Blaze ‚Äì Suporte Unificado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .box {
      width: 480px;
      border: 2px solid #e10600;
      border-radius: 10px;
      padding: 24px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
      text-align: center;
      overflow-y: auto;
      max-height: 95vh;
    }

    h2 {
      color: #e10600;
      margin-bottom: 16px;
    }

    p {
      color: #333;
      line-height: 1.5;
      text-align: left;
    }

    ul {
      text-align: left;
      color: #333;
    }

    input {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      margin-bottom: 12px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    a {
      color: #e10600;
      font-weight: bold;
      text-decoration: none;
    }

    button {
      width: 100%;
      padding: 12px;
      margin: 5px 0;
      border: none;
      border-radius: 6px;
      background: #e10600;
      color: #fff;
      font-size: 15px;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background: #b00500;
    }

    .secondary {
      background: #555;
    }

    .secondary:hover {
      background: #333;
    }

    .link-list {
      text-align: left;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #eee;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 6px;
    }

    .link-item {
      display: block;
      padding: 8px;
      border-bottom: 1px solid #f0f0f0;
      font-size: 13px;
      color: #e10600;
      text-decoration: none;
    }

    .link-item:hover {
      background: #fff5f5;
    }

    pre {
      background: #f7f7f7;
      padding: 15px;
      white-space: pre-wrap;
      text-align: left;
      font-size: 13px;
      border: 1px solid #ddd;
      margin-top: 10px;
    }

    .logo-area {
      margin-top: 20px;
      text-align: center;
    }

    .logo-area img {
      width: 90px;
      opacity: 0.9;
    }

    label {
      display: block;
      text-align: left;
      font-size: 13px;
      font-weight: bold;
      color: #444;
    }
  </style>
</head>
<body>

<div class="box" id="app"></div>

<script>
const app = document.getElementById("app");

function tela(conteudo) {
  app.innerHTML = conteudo;
}

/* ===================== MENU PRINCIPAL ===================== */
function menu() {
  tela(`
    <h2>Fluxos de Atendimento</h2>
    <p>Selecione o tipo de atendimento:</p>

    <button onclick="inicioSaque()">üí∏ Problemas de Saque</button>
    <button onclick="inicioJR()">üéØ Jogo Respons√°vel</button>
    <button onclick="inicioCashback()">üßÆ C√°lculo Individual Cashback</button>
    <button onclick="linksUteis()">üåê Links √∫teis - Blog</button>
    
    <div class="logo-area">
      <img src="https://logodownload.org/wp-content/uploads/2022/08/blaze-logo-0.png">
    </div>
  `);
}

/* ===================== BLOG (LINKS ATUALIZADOS) ===================== */
function linksUteis() {
  const links = [
    { n: "Lei dos Grandes N√∫meros", l: "https://blaze.bet.br/pt/blog/article/lei-dos-grandes-numeros-nas-apostas" },
    { n: "RNG (Gerador de N√∫meros Aleat√≥rios)", l: "https://blaze.bet.br/pt/blog/article/rng" },
    { n: "V√≠cio em Apostas", l: "https://blaze.bet.br/pt/blog/article/vicio-em-apostas" },
    { n: "Golpes e Fraudes em Cassinos", l: "https://blaze.bet.br/pt/blog/article/golpes-e-fraudes-nos-cassinos-online" },
    { n: "Guia de An√°lise de Riscos", l: "https://blaze.bet.br/pt/blog/article/guia-de-analise-de-riscos-nas-apostas-online" },
    { n: "xG (Expected Goals)", l: "https://blaze.bet.br/pt/blog/article/xg-expected-goals" },
    { n: "Provably Fair", l: "https://blaze.bet.br/pt/blog/article/provably-fair" },
    { n: "Como sacar na Blaze", l: "https://blaze.bet.br/pt/blog/article/como-sacar-na-blaze" },
    { n: "Autoexclus√£o", l: "https://blaze.bet.br/pt/blog/article/autoexclusao-nas-plataformas-de-apostas-online" },
    { n: "Verifica√ß√£o de Identidade (KYC)", l: "https://blaze.bet.br/pt/blog/article/verificacao-de-identidade-nas-plataformas-de-apostas" },
    { n: "Rollover nas Apostas", l: "https://blaze.bet.br/pt/blog/article/rollover-nas-apostas" },
    { n: "Over e Under", l: "https://blaze.bet.br/pt/blog/article/over-e-under" },
    { n: "Handicap Europeu", l: "https://blaze.bet.br/pt/blog/article/handicap-europeu" },
    { n: "Cashback da Blaze", l: "https://blaze.bet.br/pt/blog/article/cashback-da-blaze" },
    { n: "S√≠mbolos Scatter", l: "https://blaze.bet.br/pt/blog/article/simbolos-scatter" },
    { n: "Maneiras de vencer nos Slots", l: "https://blaze.bet.br/pt/blog/article/maneiras-de-vencer-nos-slots" },
    { n: "B√¥nus de Cassino Online", l: "https://blaze.bet.br/pt/blog/article/bonus-de-cassino-online" },
    { n: "Enciclop√©dia de Apostas", l: "https://blaze.bet.br/pt/blog/article/enciclopedia-de-apostas-esportivas" },
    { n: "Mercados de Apostas Esportivas", l: "https://blaze.bet.br/pt/blog/article/mercados-de-apostas-esportivas" },
    { n: "Estrat√©gia James Bond", l: "https://blaze.bet.br/pt/blog/article/estrategia-james-bond" },
    { n: "Cassino ao Vivo", l: "https://blaze.bet.br/pt/blog/article/cassino-ao-vivo" },
    { n: "Sistema Su√≠√ßo", l: "https://blaze.bet.br/pt/blog/article/sistema-suico" },
    { n: "Tipster nas Apostas", l: "https://blaze.bet.br/pt/blog/article/tipster-nas-apostas-esportivas" }
  ];

  let htmlLinks = links.map(link => `<a href="${link.l}" target="_blank" class="link-item">üîó ${link.n}</a>`).join('');

  tela(`
    <h2>Links √öteis - Blog</h2>
    <div class="link-list">${htmlLinks}</div>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

/* ===================== PROBLEMAS DE SAQUE (TEXTOS ORIGINAIS) ===================== */
function inicioSaque() {
  tela(`
    <h2>Problemas de Saque</h2>
    <p>O cliente recebeu o saque?</p>
    <button onclick="saqueRecebido()">Sim</button>
    <button onclick="tempoSaque()">N√£o</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
    <div class="logo-area"><img src="https://logodownload.org/wp-content/uploads/2022/08/blaze-logo-0.png"></div>
  `);
}

function saqueRecebido() {
  tela(`
    <h2>√ìtimo!</h2>
    <p>Os saques podem levar de <b>2 at√© 48 horas</b> para que nosso intermedi√°rio financeiro conclua o processamento.<br><br>Oriente sempre o cliente a aguardar o prazo padr√£o.</p>
    <button class="secondary" onclick="inicioSaque()">Reiniciar fluxo</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function tempoSaque() {
  tela(`
    <h2>Tempo do Saque</h2>
    <p>H√° quanto tempo o saque foi solicitado?</p>
    <button onclick="statusSaque()">Menos de 48 horas</button>
    <button onclick="saque48()">Mais de 48 horas</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function statusSaque() {
  tela(`
    <h2>Status do Saque</h2>
    <p>Qual o status do saque no sistema?</p>
    <button onclick="pending()">Pending Review / Waiting Input</button>
    <button onclick="refunded()">Refunded</button>
    <button onclick="complete()">Complete</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function pending() { tela(`<h2>Saque em an√°lise</h2><p>Oriente o cliente a aguardar o prazo padr√£o.<br><br>Envie o atalho <b>/prazo saque</b>.</p><button class="secondary" onclick="inicioSaque()">Reiniciar fluxo</button>`); }
function refunded() { tela(`<h2>Saque reembolsado</h2><p>O saque foi reembolsado a pedido do usu√°rio. Oriente o cliente a solicitar novamente e enviar o atalho <b>/prazo saque</b>.</p><button class="secondary" onclick="inicioSaque()">Reiniciar fluxo</button>`); }
function complete() { tela(`<h2>Saque conclu√≠do</h2><p>O valor j√° foi enviado ao banco. Oriente a verificar o extrato ou utilizar <b>/contact form</b>.</p><button class="secondary" onclick="inicioSaque()">Reiniciar fluxo</button>`); }

function saque48() {
  tela(`
    <h2>Saque acima de 48 horas</h2>
    <p>Se status for <b>Pending Review/Waiting Input</b>, preencher formul√°rio:</p>
    <p><a href="https://support.blaze-help.com/hc/pt-br/articles/13980562814492-Base-Chat-Transaction-Issues-Form" target="_blank">Acessar formul√°rio de transa√ß√µes</a></p>
    <ul>
      <li>Preencher planilha BCTIF</li>
      <li><a href="https://docs.google.com/document/d/1nAdViRyXykIXYSqihMK8LlVlXgCsm09vH6qBhmdWN6E/edit" target="_blank">Procedimentos BCTIF</a></li>
    </ul>
    <p>Se status for <b>Complete</b> e cliente n√£o localizou:</p>
    <p><a href="https://docs.google.com/document/d/19_tKhSg62ZGcmtLplxcYjoGRfxt43z5FfuG476dNE50/edit" target="_blank">Acessar formul√°rio de contato</a></p>
    <button class="secondary" onclick="inicioSaque()">Reiniciar fluxo</button>
  `);
}

/* ===================== JOGO RESPONS√ÅVEL (RESTAURADO COMPLETO) ===================== */
function inicioJR() {
  tela(`
    <h2>Jogo Respons√°vel</h2>
    <p>O cliente mencionou algo relacionado a apostas/jogo e problemas pessoais?</p>
    <button onclick="naoJR()">N√£o</button>
    <button onclick="classificacaoJR()">Sim</button>
    <p style="font-size: 14px; margin-top: 15px;">
      üìÑ <b>Material de apoio</b><br>
      Siga com o fluxograma aberto durante o atendimento.<br>
      <a href="https://drive.google.com/file/d/1y0IAo5QAiXIH29zt8cofJHWLLo5uD_V3/view?usp=drive_link" target="_blank">Acessar fluxograma em PDF</a>
    </p>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function naoJR() { tela(`<h2>Orienta√ß√£o</h2><p>‚ûú Siga o atendimento normalmente.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`); }

function classificacaoJR() {
  tela(`
    <h2>Classifica√ß√£o de Risco</h2>
    <button onclick="jrBaixo()">üü¢ Risco Baixo</button>
    <button onclick="jrMedio()">üü° Risco M√©dio</button>
    <button onclick="jrAlto()">üü† Risco Alto</button>
    <button onclick="jrCritico()">üî¥ Risco Cr√≠tico</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function jrBaixo() { tela(`<h2>üü¢ Risco Baixo</h2><p>Realizar acolhimento e seguir o script.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`); }
function jrMedio() { tela(`<h2>üü° Risco M√©dio</h2><p>Sugerir ferramentas JR.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`); }

function jrAlto() {
  tela(`
    <h2>üü† Risco Alto</h2>
    <p><b>A√ß√µes:</b> Enviar script, colocar tag <b>responsible gambling</b> no Zendesk e encaminhar ao supervisor.</p>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function jrCritico() {
  tela(`
    <h2>üî¥ Risco Cr√≠tico</h2>
    <p><b>A√ß√µes:</b> Enviar script, colocar tag <b>responsible gambling</b> no Zendesk e encaminhar ao supervisor.</p>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

/* ===================== CASHBACK ===================== */
function inicioCashback() {
  tela(`
    <h2>C√°lculo Individual Cashback</h2>
    <div style="text-align: left;">
      <label>Porcentagem (1 a 25%):</label>
      <input id="porcentagem" type="number" min="1" max="25" value="5">
      <label>Total apostado (real_bet):</label>
      <input id="real_bet" type="number" step="0.01" value="0">
      <label>Total ganho (real_won):</label>
      <input id="real_won" type="number" step="0.01" value="0">
      <label>Cashback semana anterior:</label>
      <input id="last_week_cb" type="number" step="0.01" value="0">
      <label>Ganhos Giros Gr√°tis:</label>
      <input id="spins" type="number" step="0.01" value="0">
      <label>Ganhos Recompensas (sell_amount):</label>
      <input id="sell" type="number" step="0.01" value="0">
      <label>B√¥nus convertidos (transfer_amount):</label>
      <input id="trans" type="number" step="0.01" value="0">
      <label>Rakeback total recebido:</label>
      <input id="rake" type="number" step="0.01" value="0">
    </div>
    <button onclick="gerarResumo()">Pronto</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
    <div id="resultado"></div>
  `);
}

function gerarResumo() {
  const p = parseFloat(document.getElementById("porcentagem").value || 0);
  const bet = parseFloat(document.getElementById("real_bet").value || 0);
  const won = parseFloat(document.getElementById("real_won").value || 0);
  const lastCb = parseFloat(document.getElementById("last_week_cb").value || 0);
  const spins = parseFloat(document.getElementById("spins").value || 0);
  const sell = parseFloat(document.getElementById("sell").value || 0);
  const trans = parseFloat(document.getElementById("trans").value || 0);
  const rake = parseFloat(document.getElementById("rake").value || 0);

  const ex = lastCb + spins + sell + trans + rake;
  const gt = won + ex;
  const per = bet - gt;
  const fcb = per > 0 ? (per * (p / 100)) : 0;

  const textoFinal = `√â importante que saiba que o cashback semanal n√£o √© um ganho sobre o total de perdas que teve durante a semana.

Para receb√™-lo, durante a semana precisa ter tido mais perdas do que ganhos, e √© a partir dessa diferen√ßa que √© tirada sua porcentagem de cashback.

Vamos rever seus valores:
Total apostado = BRL ${bet.toFixed(2)}
Total ganho = BRL ${won.toFixed(2)}

Cashback da semana passada = BRL ${lastCb.toFixed(2)}
Ganhos com giros gr√°tis = BRL ${spins.toFixed(2)}
Ganhos de recompensas = BRL ${sell.toFixed(2)}
B√¥nus convertidos em reais = BRL ${trans.toFixed(2)}
Rakeback = BRL ${rake.toFixed(2)}

Ganhos totais considerados = BRL ${won.toFixed(2)} + BRL ${ex.toFixed(2)} = BRL ${gt.toFixed(2)}
Perdas = BRL ${bet.toFixed(2)} - BRL ${gt.toFixed(2)} = BRL ${per.toFixed(2)}
Cashback (BRL ${per.toFixed(2)} - ${p}%) = BRL ${fcb.toFixed(2)}

( Mais informa√ß√µes sobre como funciona o calculo do cashback em https://support.blaze-help.com/hc/pt-br/articles/360007716017-Como-funciona-o-cashback-reembolso )`;

  document.getElementById("resultado").innerHTML = `
    <pre id="preOutput">${textoFinal}</pre>
    <button id="btnCopiar" onclick="executarCopia()">Copiar Mensagem</button>
  `;
}

/* FUN√á√ÉO DE C√ìPIA COM FALLBACK PARA NAVEGADORES QUE BLOQUEIAM */
function executarCopia() {
  const texto = document.getElementById("preOutput").innerText;
  
  // Tenta navigator.clipboard
  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(texto).then(() => sucessoCopia()).catch(() => fallbackCopia(texto));
  } else {
    fallbackCopia(texto);
  }
}

function fallbackCopia(texto) {
  const ta = document.createElement("textarea");
  ta.value = texto;
  ta.style.position = "fixed"; // Evita scroll
  document.body.appendChild(ta);
  ta.focus();
  ta.select();
  try {
    document.execCommand('copy');
    sucessoCopia();
  } catch (err) {
    alert("Erro ao copiar automaticamente. Selecione o texto e copie manualmente.");
  }
  document.body.removeChild(ta);
}

function sucessoCopia() {
  const btn = document.getElementById("btnCopiar");
  const originalText = btn.innerText;
  btn.innerText = "‚úÖ Copiado!";
  btn.style.background = "#28a745";
  setTimeout(() => {
    btn.innerText = originalText;
    btn.style.background = "#e10600";
  }, 2000);
}

menu();
</script>
</body>
</html>
