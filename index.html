<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Blaze ‚Äì Suporte Unificado</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .box {
      width: 450px;
      border: 2px solid #e10600;
      border-radius: 10px;
      padding: 24px;
      box-shadow: 0 0 12px rgba(0,0,0,0.1);
      text-align: center;
      overflow-y: auto;
      max-height: 95vh;
    }

    h2 {
      color: #e10600;
      margin-bottom: 16px;
    }

    p {
      color: #333;
      line-height: 1.5;
      text-align: left;
    }

    ul {
      text-align: left;
      color: #333;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 4px;
      margin-bottom: 12px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    a {
      color: #e10600;
      font-weight: bold;
      text-decoration: none;
    }

    button {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border: none;
      border-radius: 6px;
      background: #e10600;
      color: #fff;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background: #b00500;
    }

    .secondary {
      background: #555;
    }

    .secondary:hover {
      background: #333;
    }

    pre {
      background: #f7f7f7;
      padding: 15px;
      white-space: pre-wrap;
      text-align: left;
      font-size: 13px;
      border: 1px solid #ddd;
      margin-top: 10px;
    }

    .logo-area {
      margin-top: 20px;
      text-align: center;
    }

    .logo-area img {
      width: 100px;
      opacity: 0.9;
    }

    label {
      display: block;
      text-align: left;
      font-size: 13px;
      font-weight: bold;
      color: #444;
    }
  </style>
</head>
<body>

<div class="box" id="app"></div>

<script>
const app = document.getElementById("app");

function tela(conteudo) {
  app.innerHTML = conteudo;
}

/* ===================== MENU PRINCIPAL ===================== */
function menu() {
  tela(`
    <h2>Fluxos de Atendimento</h2>
    <p>Selecione o tipo de atendimento:</p>

    <button onclick="inicioSaque()">üí∏ Problemas de Saque</button>
    <button onclick="inicioJR()">üéØ Jogo Respons√°vel</button>
    <button onclick="inicioCashback()">üßÆ C√°lculo Individual Cashback</button>
    
    <div class="logo-area">
      <img src="https://logodownload.org/wp-content/uploads/2022/08/blaze-logo-0.png">
    </div>
  `);
}

/* ===================== PROBLEMAS DE SAQUE (COMPLETO) ===================== */
function inicioSaque() {
  tela(`
    <h2>Problemas de Saque</h2>
    <p>O cliente recebeu o saque?</p>
    <button onclick="saqueRecebido()">Sim</button>
    <button onclick="tempoSaque()">N√£o</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function saqueRecebido() {
  tela(`
    <h2>√ìtimo!</h2>
    <p>Os saques podem levar de <b>2 at√© 48 horas</b> para que nosso intermedi√°rio financeiro conclua o processamento.<br><br>Oriente sempre o cliente a aguardar o prazo padr√£o.</p>
    <button class="secondary" onclick="inicioSaque()">Reiniciar atendimento</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function tempoSaque() {
  tela(`
    <h2>Tempo do Saque</h2>
    <p>H√° quanto tempo o saque foi solicitado?</p>
    <button onclick="statusSaque()">Menos de 48 horas</button>
    <button onclick="saque48()">Mais de 48 horas</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function statusSaque() {
  tela(`
    <h2>Status do Saque</h2>
    <p>Qual o status do saque no sistema?</p>
    <button onclick="pending()">Pending Review / Waiting Input</button>
    <button onclick="refunded()">Refunded</button>
    <button onclick="complete()">Complete</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

function pending() {
  tela(`<h2>Saque em an√°lise</h2><p>Oriente o cliente a aguardar o prazo padr√£o.<br><br>Envie o atalho <b>/prazo saque</b>.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function refunded() {
  tela(`<h2>Saque reembolsado</h2><p>O saque foi reembolsado a pedido do usu√°rio. Oriente o cliente a solicitar novamente e enviar o atalho <b>/prazo saque</b>.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function complete() {
  tela(`<h2>Saque conclu√≠do</h2><p>O valor j√° foi enviado ao banco. Oriente a verificar o extrato ou utilizar <b>/contact form</b>.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function saque48() {
  tela(`
    <h2>Saque acima de 48 horas</h2>
    <p>Quando ultrapassa 48h, verifique o status:</p>
    <p>Se <b>Pending Review/Waiting Input</b>, preencher formul√°rio:</p>
    <p><a href="https://support.blaze-help.com/hc/pt-br/articles/13980562814492-Base-Chat-Transaction-Issues-Form" target="_blank">Acessar formul√°rio de transa√ß√µes</a></p>
    <ul>
      <li>Preencher planilha BCTIF</li>
      <li><a href="https://docs.google.com/document/d/1nAdViRyXykIXYSqihMK8LlVlXgCsm09vH6qBhmdWN6E/edit" target="_blank">Procedimentos BCTIF</a></li>
    </ul>
    <p>Se <b>Complete</b> e cliente n√£o localizou:</p>
    <p><a href="https://docs.google.com/document/d/19_tKhSg62ZGcmtLplxcYjoGRfxt43z5FfuG476dNE50/edit" target="_blank">Acessar formul√°rio de contato</a></p>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
  `);
}

/* ===================== JOGO RESPONS√ÅVEL ===================== */
function inicioJR() {
  tela(`<h2>Jogo Respons√°vel</h2><p>O cliente mencionou algo relacionado a problemas pessoais com jogo?</p><button onclick="classificacaoJR()">Sim</button><button onclick="naoJR()">N√£o</button><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function naoJR() {
  tela(`<h2>Orienta√ß√£o</h2><p>Siga o atendimento normalmente.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function classificacaoJR() {
  tela(`<h2>Classifica√ß√£o de Risco</h2><button onclick="jrAlto()">üü† Risco Alto</button><button onclick="jrCritico()">üî¥ Risco Cr√≠tico</button><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function jrAlto() {
  tela(`<h2>üü† Risco Alto</h2><p><b>A√ß√µes:</b> Enviar script descrito no fluxo, colocar tag <b>responsible gambling</b> no Zendesk e encaminhar ao supervisor.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

function jrCritico() {
  tela(`<h2>üî¥ Risco Cr√≠tico</h2><p><b>A√ß√µes:</b> Enviar script descrito no fluxo, colocar tag <b>responsible gambling</b> no Zendesk e encaminhar ao supervisor.</p><button class="secondary" onclick="menu()">Voltar ao menu</button>`);
}

/* ===================== CASHBACK (FORMATO BRL) ===================== */
function inicioCashback() {
  tela(`
    <h2>C√°lculo Individual Cashback</h2>
    <div style="text-align: left;">
      <label>Porcentagem do Cashback:</label>
      <select id="porcentagem">
        <option value="5">5%</option>
        <option value="10">10%</option>
        <option value="15">15%</option>
        <option value="20">20%</option>
        <option value="25">25%</option>
      </select>

      <label>Total apostado (real_bet):</label>
      <input id="real_bet" type="number" step="0.01" value="0">

      <label>Total ganho (real_won):</label>
      <input id="real_won" type="number" step="0.01" value="0">

      <label>Cashback semana anterior:</label>
      <input id="last_week_cb" type="number" step="0.01" value="0">

      <label>Ganhos Giros Gr√°tis:</label>
      <input id="spins" type="number" step="0.01" value="0">

      <label>Ganhos Recompensas (sell_amount):</label>
      <input id="sell" type="number" step="0.01" value="0">

      <label>B√¥nus convertidos (transfer_amount):</label>
      <input id="trans" type="number" step="0.01" value="0">

      <label>Rakeback total recebido:</label>
      <input id="rake" type="number" step="0.01" value="0">

      <label>Saques (withdrawals_amount):</label>
      <input id="saque" type="number" step="0.01" value="0">
    </div>
    <button onclick="gerarResumo()">Pronto</button>
    <button class="secondary" onclick="menu()">Voltar ao menu</button>
    <div id="resultado"></div>
  `);
}

function gerarResumo() {
  const p = document.getElementById("porcentagem").value;
  const bet = parseFloat(document.getElementById("real_bet").value || 0);
  const won = parseFloat(document.getElementById("real_won").value || 0);
  const lastCb = parseFloat(document.getElementById("last_week_cb").value || 0);
  const spins = parseFloat(document.getElementById("spins").value || 0);
  const sell = parseFloat(document.getElementById("sell").value || 0);
  const trans = parseFloat(document.getElementById("trans").value || 0);
  const rake = parseFloat(document.getElementById("rake").value || 0);
  const saque = parseFloat(document.getElementById("saque").value || 0);

  const ganhosExtras = lastCb + spins + sell + trans + rake + saque;
  const ganhosTotais = won + ganhosExtras;
  const perdas = bet - ganhosTotais;
  const valorFinalCb = perdas > 0 ? (perdas * (p / 100)) : 0;

  const textoFinal = `√â importante que saiba que o cashback semanal n√£o √© um ganho sobre o total de perdas que teve durante a semana.

Para receb√™-lo, durante a semana precisa ter tido mais perdas do que ganhos, e √© a partir dessa diferen√ßa que √© tirada sua porcentagem de cashback.

Vamos rever seus valores:
Total apostado = BRL ${bet.toFixed(2)}
Total ganho = BRL ${won.toFixed(2)}

Cashback da semana passada = BRL ${lastCb.toFixed(2)}
Ganhos com giros gr√°tis = BRL ${spins.toFixed(2)}
Ganhos de recompensas = BRL ${sell.toFixed(2)}
B√¥nus convertidos em reais = BRL ${trans.toFixed(2)}
Rakeback = BRL ${rake.toFixed(2)}

Ganhos totais considerados = BRL ${won.toFixed(2)} + BRL ${ganhosExtras.toFixed(2)} = BRL ${ganhosTotais.toFixed(2)}
Perdas = BRL ${bet.toFixed(2)} - BRL ${ganhosTotais.toFixed(2)} = BRL ${perdas.toFixed(2)}
Cashback (BRL ${perdas.toFixed(2)} - ${p}%) = BRL ${valorFinalCb.toFixed(2)}

( Mais informa√ß√µes sobre como funciona o calculo do cashback em https://support.blaze-help.com/hc/pt-br/articles/360007716017-Como-funciona-o-cashback-reembolso )`;

  document.getElementById("resultado").innerHTML = `
    <pre id="preOutput">${textoFinal}</pre>
    <button id="btnCopiar" onclick="executarCopia()">Copiar Mensagem</button>
  `;
}

function executarCopia() {
  const texto = document.getElementById("preOutput").innerText;
  navigator.clipboard.writeText(texto).then(() => {
    const btn = document.getElementById("btnCopiar");
    btn.innerText = "‚úÖ Copiado!";
    setTimeout(() => btn.innerText = "Copiar Mensagem", 2000);
  });
}

menu();
</script>

</body>
</html>
